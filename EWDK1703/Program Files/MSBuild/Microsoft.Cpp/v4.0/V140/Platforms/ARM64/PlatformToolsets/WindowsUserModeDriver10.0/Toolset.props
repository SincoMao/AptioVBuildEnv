<!--
***********************************************************************************************
Microsoft.Cpp.$(Platform).WindowsUserModeDriver10.0.props

WARNING:  DO NOT MODIFY this file unless you are knowledgeable about MSBuild and have
          created a backup copy.  Incorrect changes to this file will make it
          impossible to load or build your projects from the command-line or the IDE.

Copyright (C) Microsoft Corporation. All rights reserved.
***********************************************************************************************
-->

<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <IsUserModeToolset>true</IsUserModeToolset>
    <DebuggerFlavor Condition="'$(DebuggerFlavor)'==''">DbgengRemoteDebugger</DebuggerFlavor>
    
    <!-- If MicrosoftKitRoot value is defined in the environment, then we define the WDKContentRoot based on that -->
    <MicrosoftKitRoot  Condition=" '$(MicrosoftKitRoot)'!='' AND !HasTrailingSlash('$(MicrosoftKitRoot)') ">$(MicrosoftKitRoot)\</MicrosoftKitRoot>
    <!-- Users can override the kit version by specifying it as an environment variable, by default use the current kit version -->
    <WDKKitVersion Condition=" '$(WDKKitVersion)'==''">10.0</WDKKitVersion>
    <!--WDKContentRoot value is derived from MicrosoftKitRoot, it is this sub-dir "Windows Kits\$(WDKKitVersion)\" under MicrosoftKitRoot. -->
    <WDKContentRoot Condition=" '$(MicrosoftKitRoot)'!=''">$(MicrosoftKitRoot)windows kits\$(WDKKitVersion)</WDKContentRoot>
    
    <WDKContentRoot Condition="'$(WDKContentRoot)' == ''">$(Registry:HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Kits\Installed Roots@KitsRoot10)</WDKContentRoot>
    <WDKContentRoot Condition="'$(WDKContentRoot)' == ''">$(Registry:HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows Kits\Installed Roots@KitsRoot10)</WDKContentRoot>
    
    <!-- Check for Trailing Slash -->
    <WDKContentRoot  Condition=" '$(WDKContentRoot)'!='' AND !HasTrailingSlash('$(WDKContentRoot)') ">$(WDKContentRoot)\</WDKContentRoot>
	
  </PropertyGroup>
    
  <Import Condition="Exists('$(WDKContentRoot)build\WindowsDriver.Default.props')" Project="$(WDKContentRoot)build\WindowsDriver.Default.props"/>

  <Import Project="$(VCTargetsPath)\Platforms\$(Platform)\PlatformToolsets\WindowsUserModeDriver10.0\ImportBefore\*.props" Condition="Exists('$(VCTargetsPath)\Platforms\$(Platform)\PlatformToolsets\WindowsUserModeDriver10.0\ImportBefore')" />
  
  <Import Project="$(WDKContentRoot)\build\$(Platform)\WindowsUserModeDriver\*.props" />

  <PropertyGroup>
    <V120PropsFile>$(VCTargetsPath)\Platforms\$(Platform)\PlatformToolsets\v120\Toolset.props</V120PropsFile>
    <V140PropsFile>$(VCTargetsPath)\Platforms\$(Platform)\PlatformToolsets\v140\Toolset.props</V140PropsFile>
  </PropertyGroup>
  
  <PropertyGroup Condition="'$(Platform)'=='ARM64'">
    <V120PropsFile>$(VCTargetsPath)\Platforms\$(Platform)\PlatformToolsets\v120_wdk\Toolset.props</V120PropsFile>
    <V140PropsFile>$(VCTargetsPath)\Platforms\$(Platform)\PlatformToolsets\v140_wdk\Toolset.props</V140PropsFile>
  </PropertyGroup>

  <Import Condition="Exists('$(V140PropsFile)')" Project="$(V140PropsFile)" />
  <Import Condition="!Exists('$(V140PropsFile)')" Project="$(V120PropsFile)" />
  
  <Import Condition="Exists('$(WindowsSdkDir)\DesignTime\CommonConfiguration\Neutral\WDK\WDK.props') AND '$(LegacyTargetVersion)' == 'false'" Project="$(WindowsSdkDir)\DesignTime\CommonConfiguration\Neutral\WDK\WDK.props" />
  <Import Condition="Exists('$(WDKContentRoot)\DesignTime\CommonConfiguration\Neutral\WDK\WDK.Legacy.props') AND '$(LegacyTargetVersion)' == 'true'" Project="$(WDKContentRoot)\DesignTime\CommonConfiguration\Neutral\WDK\WDK.Legacy.props" />

  <PropertyGroup>
    <TargetPlatformVersion Condition="'$(VisualStudioVersion)' == '12.0'"></TargetPlatformVersion>
  </PropertyGroup>
  
</Project>
